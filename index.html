<html>
  <head>
    <meta name="viewport" content="width=device-width" />
    <title>Todo</title>
    <link href="todo.css" rel="stylesheet" type="text/css" />
    <script src="../common/util.js"></script>
    <script src="../common/editableList.js"></script>
    <script src="../common/sockjs-0.3.min.js"></script>
    <script src="../common/jsonSocket.js"></script>
    <script src="../common/channels.js"></script>
    <script src="../common/widgets.js"></script>
   </head>

   <body curView="loginView">
     <div id="loginView">
       <table>
	 <tr>
	   <td>Login:</td>
	   <td>
	     <input id="login" size="8">
	   </td>
	 </tr>
	 <tr>
	   <td>Password:</td>
	   <td>
	     <input type="password" id="password" size="8">
	   </td>
	 </tr>
       </table>
       <div id="doLogin"
	    onclick="todo.login(login.value, password.value)">Login</div>
     </div>


     <div id="managerView">
       <div>Saved Lists</div>
       <editable-list id="listOfLists"
		      editable="true"
		      listItem="todo.listManagerItem">
	 No lists
       </editable-list>
       <a onclick="listOfLists.append()">Create List</a>
     </div>


     <div id="listView" editing="false">
       <div id="screen">
	 <editable-list id="list"
			showCompleted="false"
			insertOnEnter="true"
			listItem="todo.todoListItem">
	   No items
	 </editable-list>
	 <script>
	   DOMAttrModified(list, "editable", function() {
	     listView.setAttribute("editing", list.getAttribute("editable"));
	   });
	 </script>
       </div>

       <div id="controls" align="center">
	 <span style="float: left;">
	   <toggle-button
	      onclick="list.setEditMode(!list.getEditMode());"
	      attr="editable"
	      target="list"
	      enabledText="Done"
	      disabledText="Edit">Edit</toggle-button>

	   <toggle-button
	      attr="showCompleted"
	      target="list"
	      enabledText="Hide Completed"
	      disabledText="Show Completed"
	      >Show Completed</toggle-button>
	   
	   <push-button
	      style="width: 1em"
	      id="drop"
	      onclick="list.remove()">-</push-button>

	   <push-button
	      style="width: 1em"
	      id="new"
	      onclick="list.append()">+</push-button>
	 </span>
       </div>
     </div>
     
     <script src="todo.js"></script>
</body>
</html>
